<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BAKA360: The Development and Integration of Farm-to-Market Cattle Management System</title>

  <!--font awesome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  <!--css file-->
  <link rel="stylesheet" href="userdashboard.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="inv.css">

  <!--for data tbl-->
  <!-- Include jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  <!-- Include DataTables CSS and JS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css">
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.js"></script>
      
  <!--for firebase-->
  <script src="https://www.gstatic.com/firebasejs/9.3.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.3.0/firebase-firestore.js"></script>
</head>
<div class="sidebar close">
  <div class="logo">
    <i class="ri-store-3-fill"></i>
    <span class="logo-name">BAKA360</span>
  </div>

  <ul class="nav-list">
    <li>
      <a href="nav.html">
        <i class="ri-dashboard-2-line"></i>
        <span class="link-name">Dashboard</span>
      </a>

      <ul class="sub-menu blank">
        <li><a href="userdashboard.html" class="link-name">Dashboard</a></li>
      </ul>
    </li>

    <li>
      <div class="icon-link">
        <a href="blog.html">
            <i class="ri-article-line"></i>
          <span class="link-name">Blogs</span>
        </a>
      </div>

      <ul class="sub-menu blank">
        <li><a href="blog.html" class="link-name">Blogs</a></li>
      </ul>
    </li>

    <li>
      <div class="icon-link">
        <a href="#">
          <i class="ri-graduation-cap-line"></i>
          <span class="link-name">Courses</span>
        </a>
      </div>

      <ul class="sub-menu blank">
        <li><a href="courses.html" class="link-name">Courses</a></li>
      </ul>
    </li>

    <li>
      <div class="icon-link">
        <a href="#">
            <i class="ri-presentation-fill"></i>
          <span class="link-name">Training</span>
        </a>
      </div>

      <ul class="sub-menu blank">
        <li><a href="training.html" class="link-name">Training</a></li>
      </ul>
    </li>
    
    <li>
      <div class="icon-link">
        <a href="#">
            <i class="ri-briefcase-4-line"></i>
          <span class="link-name">Inventory</span>
        </a>
      </div>

      <ul class="sub-menu blank">
        <li><a href="inventory.html" class="link-name">Inventory</a></li>
      </ul>
    </li>

    <li>
      <a href="#">
        <i class="ri-question-line"></i>
        <span class="link-name">Help</span>
      </a>

      <ul class="sub-menu blank">
        <li><a href="#" class="link-name">Help</a></li>
      </ul>
    </li>

    <li>
      <a href="#">
        <i class="ri-settings-4-line"></i>
        <span class="link-name">Settings</span>
      </a>

      <ul class="sub-menu blank">
        <li><a href="#" class="link-name">Settings</a></li>
      </ul>
    </li>
    
    <li>
        <a href="#">
            <i class="ri-information-line"></i>
          <span class="link-name">About</span>
        </a>

        <ul class="sub-menu blank">
          <li><a href="#" class="link-name">About</a></li>
        </ul>
    </li>
    
    <li>
      <div class="logout">
            <a href="index.html">
                <i class="ri-logout-box-line"></i>
                <span class="link-name">Logout</span>
            </a>

            <ul class="sub-menu blank">
                <li><a href="index.html" class="link-name">Logout</a></li>
            </ul>
      </div>
    </li>
  </ul>
</div>
  

<div class="home-section">
<div class="home-content">
  <i class="fas fa-bars"></i>
  <span class="text">BAKA 360: FARM-TO-MARKET CATTLE MANAGEMENT SYSTEM</span>
    </div>
    <div class="main--content">
        <div class="header--wrapper">
            <div class="header--title">INVENTORY</div>
        </div>
        <br>
        <h2 style="margin-top: 10px; text-align: center;">Cattle Inventory Table</h2><br>
        <br>
        <button id="addDataBtn">Add Data</button>

        <div id="popupForm" class="popup">
          <span class="close" onclick="closeForm()">&times;</span>
          <h2>Enter Data</h2>
          <form action="/process-form" method="post">
            <label for="dataInput">Batch ID</label>
            <input type="number" id="idData" required name="numericData" placeholder="Enter Batch ID">

            <label for="numericInput">Age:</label>
            <input type="number" id="ageData" required name="numericData" placeholder="Enter Age">

            <label for="healthStatusSelect">Health Status</label>
            <select id="healthStatusSelect" required name="data" placeholder="Select Status">\
              <option value="Excellent">Excellent</option>
              <option value="Good">Good</option>
              <option value="Fair">Fair</option>
              <option value="Poor">Poor</option>
            </select>

            <label for="beefQualitySelect">Beef Quality</label>
            <select id="beefQualitySelect" required name="data" placeholder="Select Quality">
              <option value="Excellent">Excellent</option>
              <option value="Good">Good</option>
              <option value="Fair">Fair</option>
              <option value="Poor">Poor</option>
            </select>
            <button type="submit">Submit</button>
          </form>
        </div>
        <br>
        <div class="data"> 
          <br>
            <table>
              <thead>
                  <tr>
                      <th>Batch ID</th>
                      <th>Age</th>
                      <th>Health Status</th>
                      <th>Beef Quality</th>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                      <td>1001</td>
                      <td>2</td>
                      <td>Good</td>
                      <td>Good</td>
                  </tr>
                  <tr>
                      <td>1002</td>
                      <td>3</td>
                      <td>Poor</td>
                      <td>Fair</td>
                  </tr>
                  <tr>
                      <td>1003</td>
                      <td>1</td>
                      <td>Excellent</td>
                      <td>Good</td>
                  </tr>
                  <tr>
                    <td>1004</td>
                    <td>1</td>
                    <td>Fair</td>
                    <td>Good</td>
                  </tr>
                  <tr>
                    <td>1005</td>
                    <td>2</td>
                    <td>Poor</td>
                    <td>Fair</td>
                  </tr>
                  <tr>
                    <td>1006</td>
                    <td>1</td>
                    <td>Good</td>
                    <td>Good</td>
                  </tr>
                  <tr>
                    <td>1007</td>
                    <td>1</td>
                    <td>Excellent</td>
                    <td>Fair</td>
                  </tr>
                  <tr>
                    <td>1008</td>
                    <td>1</td>
                    <td>Fair</td>
                    <td>Poor</td>
                  </tr>
                  <tr>
                    <td>1009</td>
                    <td>1</td>
                    <td>Poor</td>
                    <td>Poor</td>
                  </tr>
                  <tr>
                    <td>1010</td>
                    <td>2</td>
                    <td>Excellent</td>
                    <td>Good</td>
                </tr>
              </tbody>
          </table>
        </div>

    </div>
</div>
<script>function openForm() {
  document.getElementById("popupForm").style.display = "block";
}

function closeForm() {
  document.getElementById("popupForm").style.display = "none";
}

document.getElementById("addDataBtn").addEventListener("click", openForm);

$(document).ready(function () {
          $('table').DataTable();
      });
</script>
<script>
        let bakadata;

document.getElementById("popupForm").addEventListener("submit", function (e) {
          e.preventDefault();
          database.ref("batches").push({
              idData: document.getElementById("idData").value,
              ageData: document.getElementById("ageData").value,
              healthStatus: document.getElementById("healthStatusSelect").value,
              beefQuality: document.getElementById("beefQualitySelect").value,
          });
          closeForm();
      });

    Btn.addEventListener('click', () => {
    container.classList.add("active");
});
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getDatabase, get, set, ref, child } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-database.js";
import { getAuth, batches } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";

const firebaseConfig = {
      apiKey: "AIzaSyAxXCA6dABzQq7ZUPifdgqwfnwxFOCuNGo",
      authDomain: "bsis3a-appdev.firebaseapp.com",
      databaseURL: "https://bsis3a-appdev-default-rtdb.firebaseio.com",
      projectId: "bsis3a-appdev",
      storageBucket: "bsis3a-appdev.appspot.com",
      messagingSenderId: "815624012761",
      appId: "1:815624012761:web:4d5cc8b6649f0b72548fc8",
      measurementId: "G-DM6R45V78E"
    };

const app = initializeApp(firebaseConfig);
const db = getDatabase();
const auth = getAuth(app);
const dbref = ref(db);

let idData = document.getElementById('idData');
let ageData = document.getElementById('ageData');
let healthStatus = document.getElementById('healthStatusSelect');
let beefQuality = document.getElementById('beefQualitySelect');
let popupForm = document.getElementById('popupForm');\

let batches = evt => {
    evt.preventDefault();
    batches(auth, idData.value, ageData.value, healthStatus.value, beefQuality.value)
    .then((bakadata)=>{
        console.log(bakadata);
        set(ref(db, 'val' + bakadata.user.uid), { 
            batchid: idData.value,
            age : ageData.value,
            healthStatus: healthStatus.value,
            beefQuality: beefQuality.value,
            last_login : Date.now()
        })
        get(child(dbref, 'val/' + bakadata.user.uid)).then((snapshot)=>{ 
                if(snapshot.exists()){
                    sessionStorage.setItem("batches", JSON.stringify(bakadata.user)); 
                    alert('Data successfully added.');
                    window.location.href = 'inventory.html'; 
                }
        })
    })
    .catch((error)=>{
        alert(error.message);
        console.log(error.code);
        console.log(error.message);
    })
}

popupForm.addEventListener('submit', batches);

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // Get a reference to the database service
      database = firebase.database();
</script>
  <script src="userdashboard.js"></script>
</body>
</html>
